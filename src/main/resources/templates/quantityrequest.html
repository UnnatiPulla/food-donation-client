<!DOCTYPE html>
<html>
<head>
    <meta charset="ISO-8859-1">
    <title>Select Quantity</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1>Select Quantity for Listing</h1>

        <div>
            <p>Listing ID: <span id="listing-id"></span></p>
        </div>

        <!-- Form for selecting quantity -->
        <form id="quantity-form" method="POST" action="/submitRequest">
            <div class="form-group">
                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" name="quantity" class="form-control" min="1" required>
            </div>
            <input type="hidden" id="listing-id-input" name="listingId">
            <button type="submit" class="btn btn-success">Submit Request</button>
        </form>

        <button class="btn btn-primary" onclick="goBack()">Back to Listings</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const urlParams = new URLSearchParams(window.location.search);
            const listingId = urlParams.get("listingId");

            if (listingId) {
                document.getElementById("listing-id").textContent = listingId;
                document.getElementById("listing-id-input").value = listingId;
            }
        });

        // Navigate back to the listings page
        function goBack() {
            window.location.href = "/searchresults";
        }
    </script>
</body>
</html>
